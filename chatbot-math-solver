from flask import Flask, render_template, request, jsonify
import sympy as sp

app = Flask(__name__)

def solve_math_problem(problem):
    try:
        solution = sp.sympify(problem).evalf()
        return str(solution)
    except Exception as e:
        return "Invalid math expression"

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/chat', methods=['POST'])
def chat():
    user_input = request.json.get('message')
    
    if any(char.isdigit() for char in user_input):  # If input contains numbers, assume it's a math problem
        response = solve_math_problem(user_input)
    else:
        response = f"You said: {user_input}"  # Simple echo response for chat
    
    return jsonify({"response": response})

if __name__ == '__main__':
    app.run(debug=True)
